(function(t){function e(e){for(var n,o,l=e[0],r=e[1],c=e[2],d=0,f=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);u&&u(e);while(f.length)f.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,l=1;l<a.length;l++){var r=a[l];0!==i[r]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},i={app:0},s=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/web-ui/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=r;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("6093"),i=a.n(n);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("6648"),a("f0e6");var n=a("0261"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{attrs:{width:"200px;"}},[a("el-menu",{staticStyle:{width:"250px"},attrs:{"default-active":t.activeIndex,"background-color":"#545c64","text-color":"#fff","active-text-color":"#409EFF"},on:{select:t.changeMenu}},[a("el-menu-item",{attrs:{index:"0"}},[a("i",{staticClass:"el-icon-setting"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("系统hosts")])]),t._l(t.config,(function(e,n){return a("el-menu-item",{key:n,attrs:{index:e.name}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]),a("span",{staticStyle:{float:"right"}},[a("el-switch",{on:{change:function(a){return t.updateStatus(e)}},model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"item.status"}}),a("span",{staticStyle:{"margin-left":"20px"}},[a("span",{staticClass:"el-icon-edit",attrs:{title:"修改"},on:{click:function(a){return t.update(e)}}}),a("span",{staticClass:"el-icon-delete",attrs:{title:"删除"},on:{click:function(a){return t.del(e)}}})])],1)])])}))],2),a("span",{staticStyle:{position:"fixed",bottom:"0"}},[a("el-button",{attrs:{type:"primary",size:"small",plain:"",icon:"el-icon-circle-plus",title:"添加"},on:{click:t.create}}),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"将打开chrome自动清理缓存",placement:"top"}},[a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:t.clearCache}},[t._v("清chrome缓存")])],1),t._v(" \n        "),a("a",{attrs:{href:"https://github.com/xuzhenjun130/hostsSwitchHelper.git",target:"_blank"}},[a("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-message",plain:""}},[t._v("关于")])],1)],1)],1),a("el-main",[a("codemirror",{attrs:{options:t.cmOptions},on:{changes:t.changeCode},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1)],1),a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"80%","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:t.temp.name,callback:function(e){t.$set(t.temp,"name",e)},expression:"temp.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("span",[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v("确定")])],1)])],1)],1)},s=[],o=(a("309f"),a("0b53"),a("6d57"),a("9e76"),a("7cf8"),a("83ae")),l=a.n(o),r={name:"AppHosts",data(){return{dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"添加"},value:!0,systemCode:"",code:"",activeIndex:"0",cmOptions:{tabSize:4,mode:"text/x-ttcn-cfg",lineNumbers:!0,line:!0,readOnly:!0},config:[],temp:{name:"",status:!0,hosts:""},rules:{name:[{required:!0,message:"不得为空"}]},currentItem:{}}},created(){window.addEventListener("keydown",(function(t){83===t.keyCode&&(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&t.preventDefault()}))},mounted(){this.systemHosts(),this.getList()},methods:{systemHosts(){setTimeout(()=>{l.a.loadSystemHostText().then(t=>{this.systemCode=t,this.code=t})},100)},getList(){setTimeout(()=>{l.a.getAllSections().then(t=>{if(t.length){var e=!0,a=!1,n=void 0;try{for(var i,s=t[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){const t=i.value;t.status="on"===t.status}}catch(o){a=!0,n=o}finally{try{e||null==s.return||s.return()}finally{if(a)throw n}}this.config=t}else this.config=[]})},200)},clearCache(){l.a.clearDnsCache().then(t=>{this.$notify({title:"操作成功",message:"已完成清chrome缓存"})})},changeMenu(t){if(this.activeIndex=t,"0"===t)this.systemHosts(),this.cmOptions.readOnly=!0;else{this.cmOptions.readOnly=!1;var e=!0,a=!1,n=void 0;try{for(var i,s=this.config[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){const e=i.value;if(e.name===t){this.code=e.hosts;break}}}catch(o){a=!0,n=o}finally{try{e||null==s.return||s.return()}finally{if(a)throw n}}}},changeCode(){var t=!0,e=!1,a=void 0;try{for(var n,i=this.config[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){const t=n.value;if("0"!==this.activeIndex&&t.name===this.activeIndex){t.hosts=this.code,l.a.updateSection(t.name,t.name,!0===t.status?"on":"off",t.hosts),console.log(t,"更新配置");break}}}catch(s){e=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(e)throw a}}},create(){this.temp.name="",this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(()=>{this.$refs["dataForm"].clearValidate()})},createData(){this.$refs["dataForm"].validate(t=>{t&&(l.a.createSection(this.temp.name),this.config.push({name:this.temp.name,status:!0,hosts:"# "+this.temp.name}),this.activeIndex=this.temp.name,this.code="# "+this.temp.name,this.cmOptions.readOnly=!1,this.dialogFormVisible=!1)})},update(t){this.currentItem=t,this.temp=Object.assign({},t),this.temp.oldName=t.name,this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(()=>{this.$refs["dataForm"].clearValidate()})},updateData(){this.$refs["dataForm"].validate(t=>{t&&(this.currentItem.name=this.temp.name,l.a.update(this.temp.oldName,this.temp.name,!0===this.temp.status?"on":"off",this.temp.hosts),this.dialogFormVisible=!1)})},updateStatus(t){l.a.updateSection(t.name,t.name,!0===t.status?"on":"off",t.hosts)},del(t){this.$confirm("是否要删除: "+t.name+"？","操作确认").then(()=>{l.a.delSection(t.name);const e=this.config.indexOf(t);this.config.splice(e,1),this.activeIndex="0"}).catch(()=>{})}}},c=r,u=(a("034f"),a("5511")),d=Object(u["a"])(c,i,s,!1,null,null,null),f=d.exports,m=(a("665b"),a("375c"),a("9c26")),p=a.n(m),h=(a("c405"),a("ec2d")),b=a.n(h),g=(a("79d6"),a("aa41")),y=a.n(g),v=(a("a625"),a("176d")),x=a.n(v),S=(a("b357"),a("28d7")),w=a.n(S),O=(a("5d5c"),a("df62")),k=a.n(O),_=(a("3581"),a("8e8f")),F=a.n(_),C=(a("4087"),a("96f8")),j=a.n(C),$=(a("a48b"),a("7c6d")),I=a.n($),V=(a("dde0"),a("a3cf")),M=a.n(V),T=(a("e794"),a("a6bb")),P=a.n(T);n["default"].use(P.a),n["default"].use(M.a),n["default"].use(I.a),n["default"].use(j.a),n["default"].use(F.a),n["default"].use(k.a),n["default"].use(w.a),n["default"].use(x.a),n["default"].use(y.a),n["default"].use(b.a),n["default"].use(p.a);var D=a("8a2b"),H=a.n(D);a("b0cb");n["default"].config.productionTip=!1,n["default"].use(H.a),new n["default"]({render:t=>t(f)}).$mount("#app")},6093:function(t,e,a){}});