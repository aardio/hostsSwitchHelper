(function(t){function e(e){for(var i,o,r=e[0],l=e[1],c=e[2],d=0,m=[];d<r.length;d++)o=r[d],n[o]&&m.push(n[o][0]),n[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],i=!0,r=1;r<a.length;r++){var l=a[r];0!==n[l]&&(i=!1)}i&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},n={app:0},s=[];function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/web-ui/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var i=a("64a9"),n=a.n(i);n.a},"56d7":function(t,e,a){"use strict";a.r(e);a("551c"),a("097d");var i=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{attrs:{width:"200px;"}},[a("el-menu",{staticStyle:{width:"250px"},attrs:{"default-active":t.activeIndex,"background-color":"#545c64","text-color":"#fff","active-text-color":"#409EFF"},on:{select:t.changeMenu}},[a("el-menu-item",{attrs:{index:"0"}},[a("i",{staticClass:"el-icon-setting"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("系统hosts")])]),t._l(t.config,(function(e,i){return a("el-menu-item",{key:i,attrs:{index:e.name}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]),a("span",{staticStyle:{float:"right"}},[a("el-switch",{on:{change:function(a){return t.updateStatus(e)}},model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"item.status"}}),a("span",{staticStyle:{"margin-left":"20px"}},[a("span",{staticClass:"el-icon-edit",attrs:{title:"修改"},on:{click:function(a){return t.update(e)}}}),a("span",{staticClass:"el-icon-delete",attrs:{title:"删除"},on:{click:function(a){return t.del(e)}}})])],1)])])}))],2),a("span",{staticStyle:{position:"fixed",bottom:"0"}},[a("el-button",{attrs:{type:"primary",size:"small",plain:"",icon:"el-icon-circle-plus",title:"添加"},on:{click:t.create}}),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"将打开chrome自动清理缓存",placement:"top"}},[a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:t.clearCache}},[t._v("清chrome缓存")])],1),t._v(" \n        "),a("a",{attrs:{href:"https://github.com/xuzhenjun130/hostsSwitchHelper.git",target:"_blank"}},[a("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-message",plain:""}},[t._v("关于")])],1)],1)],1),a("el-main",[a("codemirror",{attrs:{options:t.cmOptions},on:{changes:t.changeCode},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1)],1),a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"80%","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:t.temp.name,callback:function(e){t.$set(t.temp,"name",e)},expression:"temp.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("span",[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v("确定")])],1)])],1)],1)},s=[],o=(a("ac4d"),a("8a81"),a("ac6a"),a("4917"),a("8664"),a("a47d")),r=a.n(o),l={name:"AppHosts",data(){return{dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"添加"},value:!0,systemCode:"",code:"",activeIndex:"0",cmOptions:{tabSize:4,mode:"text/x-ttcn-cfg",lineNumbers:!0,line:!0,readOnly:!0},config:[],temp:{name:"",status:!0,hosts:""},rules:{name:[{required:!0,message:"不得为空"}]},currentItem:{}}},created(){window.addEventListener("keydown",(function(t){83===t.keyCode&&(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&t.preventDefault()}))},mounted(){this.systemHosts(),this.getList()},methods:{systemHosts(){setTimeout(()=>{r.a.loadSystemHostText().then(t=>{this.systemCode=t,this.code=t})},100)},getList(){setTimeout(()=>{r.a.getAllSections().then(t=>{if(t.length){var e=!0,a=!1,i=void 0;try{for(var n,s=t[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){const t=n.value;t.status="on"===t.status}}catch(o){a=!0,i=o}finally{try{e||null==s.return||s.return()}finally{if(a)throw i}}this.config=t}else this.config=[]})},200)},clearCache(){r.a.clearDnsCache().then(t=>{this.$notify({title:"操作成功",message:"已完成清chrome缓存"})})},changeMenu(t){if(this.activeIndex=t,"0"===t)this.systemHosts(),this.cmOptions.readOnly=!0;else{this.cmOptions.readOnly=!1;var e=!0,a=!1,i=void 0;try{for(var n,s=this.config[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){const e=n.value;if(e.name===t){this.code=e.hosts;break}}}catch(o){a=!0,i=o}finally{try{e||null==s.return||s.return()}finally{if(a)throw i}}}},changeCode(){var t=!0,e=!1,a=void 0;try{for(var i,n=this.config[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){const t=i.value;if("0"!==this.activeIndex&&t.name===this.activeIndex){t.hosts=this.code,r.a.updateSection(t.name,t.name,!0===t.status?"on":"off",t.hosts),console.log(t,"更新配置");break}}}catch(s){e=!0,a=s}finally{try{t||null==n.return||n.return()}finally{if(e)throw a}}},create(){this.temp.name="",this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(()=>{this.$refs["dataForm"].clearValidate()})},createData(){this.$refs["dataForm"].validate(t=>{t&&(r.a.createSection(this.temp.name),this.config.push({name:this.temp.name,status:!0,hosts:"# "+this.temp.name}),this.activeIndex=this.temp.name,this.code="# "+this.temp.name,this.cmOptions.readOnly=!1,this.dialogFormVisible=!1)})},update(t){this.currentItem=t,this.temp=Object.assign({},t),this.temp.oldName=t.name,this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(()=>{this.$refs["dataForm"].clearValidate()})},updateData(){this.$refs["dataForm"].validate(t=>{t&&(this.currentItem.name=this.temp.name,r.a.update(this.temp.oldName,this.temp.name,!0===this.temp.status?"on":"off",this.temp.hosts),this.dialogFormVisible=!1)})},updateStatus(t){r.a.updateSection(t.name,t.name,!0===t.status?"on":"off",t.hosts)},del(t){this.$confirm("是否要删除: "+t.name+"？","操作确认").then(()=>{r.a.delSection(t.name);const e=this.config.indexOf(t);this.config.splice(e,1),this.activeIndex="0"}).catch(()=>{})}}},c=l,u=(a("034f"),a("2877")),d=Object(u["a"])(c,n,s,!1,null,null,null),m=d.exports,p=(a("0fae"),a("9e2f")),f=a.n(p);i["default"].use(f.a);var h=a("8f94"),g=a.n(h);a("a7be");i["default"].config.productionTip=!1,i["default"].use(g.a),new i["default"]({render:t=>t(m)}).$mount("#app")},"64a9":function(t,e,a){}});